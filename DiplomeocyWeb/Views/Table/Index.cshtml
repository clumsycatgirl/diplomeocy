@model Diplomeocy.Web.ViewModels.TablesViewModel

<div class="flex h-full w-full">
	<div class="w-[16%]">
		<component type="typeof(Diplomeocy.Components.Table.Sidebar)" render-mode="ServerPrerendered" />
	</div>
	<div class="w-[84%] p-4">
		<div class="p-4 rounded-lg border border-sm border-red w-full h-full flex flex-col">
			@{
				List<Diplomeocy.Database.Models.Table> tables = Model.TablesService.Tables.ToList();
			}
			@foreach (Diplomeocy.Database.Models.Table table in tables) {
				<div id="table-@(table.Id)" class="@(((Model.SelectedTable is not null && Model.SelectedTable.Id == table.Id) || (Model.SelectedTable is null && table.Id == Model.TablesService.Tables.First().Id)) ? "flex" : "hidden") flex-col h-full" role="tabpanel">
					<!-- title start -->
					<div class="flex justify-between items-center p-2 h-[5%]">
						<h2 class="text-2xl dark:text-white">1900 - Spring</h2>
						<h3 class="dark:text-white">@table.Id</h3>
					</div>
					<!-- title end -->
					<div class="flex flex-col h-[87.5%] w-full border-t">
						<!-- content start -->
						<!-- players list start -->
						<!-- players list end -->
						<!-- map start -->
						<div class="h-full w-full flex flex-row items-center justify-center">
							@*<img class="w-100 h-100 object-contain" src="/assets/images/map_no_labels.svg" alt="map" />*@
							<!-- timeline start -->
							<div class="w-[10%]">
								<!-- heading start -->
								<div class="ps-2 my-2 first:mt-0">
									<h3 class="text-xs font-medium uppercase text-gray-500 dark:text-neutral-400">
										1900
									</h3>
								</div>
								<!-- heading end -->
								<!-- year start  -->
								<div class="flex gap-x-3 relative group rounded-lg hover:bg-gray-100 dark:hover:bg-white/10">
									<button class="z-1 absolute inset-0"></button>

									<!-- icon -->
									<div class="relative last:after:hidden after:absolute after:top-0 after:bottom-0 after:start-3.5 after:w-px after:-translate-x-[0.5px] after:bg-gray-200 dark:after:bg-neutral-700 dark:group-hover:after:bg-neutral-600">
										<div class="relative z-10 size-7 flex justify-center items-center">
											<div class="size-2 rounded-full bg-white border-2 border-gray-300 group-hover:border-gray-600 dark:bg-neutral-800 dark:border-neutral-600 dark:group-hover:border-neutral-600"></div>
										</div>
									</div>
									<!-- end icon -->
									<!-- winter content start -->
									<div class="grow p-2 pb-8">
										<h3 class="flex gap-x-1.5 font-semibold text-gray-800 dark:text-white">
											Spring
										</h3>
									</div>
									<!-- winter content end  -->
								</div>
								<!-- year end item -->
								<!-- year item start -->
								<div class="flex gap-x-3 relative group rounded-lg hover:bg-gray-100 dark:hover:bg-white/10">
									<button class="z-1 absolute inset-0"></button>

									<!-- icon start -->
									<div class="relative last:after:hidden after:absolute after:top-0 after:bottom-0 after:start-3.5 after:w-px after:-translate-x-[0.5px] after:bg-gray-200 dark:after:bg-neutral-700 dark:group-hover:after:bg-neutral-600">
										<div class="relative z-10 size-7 flex justify-center items-center">
											<div class="size-2 rounded-full bg-white border-2 border-gray-300 group-hover:border-gray-600 dark:bg-neutral-800 dark:border-neutral-600 dark:group-hover:border-neutral-600"></div>
										</div>
									</div>
									<!-- icon end -->
									<!-- spring content start  -->
									<div class="grow p-2 pb-8">
										<h3 class="flex gap-x-1.5 font-semibold text-gray-800 dark:text-white">
											Fall
										</h3>
									</div>
									<!-- spring content end -->
								</div>
								<!-- year item end -->
								<!-- year start item -->
								<div class="flex gap-x-3 relative group rounded-lg hover:bg-gray-100 dark:hover:bg-white/10">
									<button class="z-1 absolute inset-0"></button>

									<!-- icon start -->
									<div class="relative last:after:hidden after:absolute after:top-0 after:bottom-0 after:start-3.5 after:w-px after:-translate-x-[0.5px] after:bg-gray-200 dark:after:bg-neutral-700 dark:group-hover:after:bg-neutral-600">
										<div class="relative z-10 size-7 flex justify-center items-center">
											<div class="size-2 rounded-full bg-white border-2 border-gray-300 group-hover:border-gray-600 dark:bg-neutral-800 dark:border-neutral-600 dark:group-hover:border-neutral-600"></div>
										</div>
									</div>
									<!-- icon end -->
									<!-- spring content start  -->
									<div class="grow p-2 pb-8">
										<h3 class="flex gap-x-1.5 font-semibold text-gray-800 dark:text-white">
											Winter
										</h3>
									</div>
									<!-- spring content end -->
								</div>
								<!-- year item end -->
								<!-- heading start -->
								<div class="ps-2 my-2 first:mt-0">
									<h3 class="text-xs font-medium uppercase text-gray-500 dark:text-neutral-400">
										1901
									</h3>
								</div>
								<!-- heading end -->
								<!-- year start  -->
								<div class="flex gap-x-3 relative group rounded-lg hover:bg-gray-100 dark:hover:bg-white/10">
									<button class="z-1 absolute inset-0"></button>

									<!-- icon -->
									<div class="relative last:after:hidden after:absolute after:top-0 after:bottom-0 after:start-3.5 after:w-px after:-translate-x-[0.5px] after:bg-gray-200 dark:after:bg-neutral-700 dark:group-hover:after:bg-neutral-600">
										<div class="relative z-10 size-7 flex justify-center items-center">
											<div class="size-2 rounded-full bg-white border-2 border-gray-300 group-hover:border-gray-600 dark:bg-neutral-800 dark:border-neutral-600 dark:group-hover:border-neutral-600"></div>
										</div>
									</div>
									<!-- end icon -->
									<!-- winter content start -->
									<div class="grow p-2 pb-8">
										<h3 class="flex gap-x-1.5 font-semibold text-gray-800 dark:text-white">
											Spring
										</h3>
									</div>
									<!-- winter content end  -->
								</div>
								<!-- year end item -->
								<!-- year item start -->
								<div class="flex gap-x-3 relative group rounded-lg hover:bg-gray-100 dark:hover:bg-white/10">
									<button class="z-1 absolute inset-0"></button>

									<!-- icon start -->
									<div class="relative last:after:hidden after:absolute after:top-0 after:bottom-0 after:start-3.5 after:w-px after:-translate-x-[0.5px] after:bg-gray-200 dark:after:bg-neutral-700 dark:group-hover:after:bg-neutral-600">
										<div class="relative z-10 size-7 flex justify-center items-center">
											<div class="size-2 rounded-full bg-white border-2 border-gray-300 group-hover:border-gray-600 dark:bg-neutral-800 dark:border-neutral-600 dark:group-hover:border-neutral-600"></div>
										</div>
									</div>
									<!-- icon end -->
									<!-- spring content start  -->
									<div class="grow p-2 pb-8">
										<h3 class="flex gap-x-1.5 font-semibold text-gray-800 dark:text-white">
											Fall
										</h3>
									</div>
									<!-- spring content end -->
								</div>
								<!-- year item end -->
								<!-- year start item -->
								<div class="flex gap-x-3 relative group rounded-lg hover:bg-gray-100 dark:hover:bg-white/10">
									<button class="z-1 absolute inset-0"></button>

									<!-- icon start -->
									<div class="relative last:after:hidden after:absolute after:top-0 after:bottom-0 after:start-3.5 after:w-px after:-translate-x-[0.5px] after:bg-gray-200 dark:after:bg-neutral-700 dark:group-hover:after:bg-neutral-600">
										<div class="relative z-10 size-7 flex justify-center items-center">
											<div class="size-2 rounded-full bg-white border-2 border-gray-300 group-hover:border-gray-600 dark:bg-neutral-800 dark:border-neutral-600 dark:group-hover:border-neutral-600"></div>
										</div>
									</div>
									<!-- icon end -->
									<!-- spring content start  -->
									<div class="grow p-2 pb-8">
										<h3 class="flex gap-x-1.5 font-semibold text-gray-800 dark:text-white">
											Winter
										</h3>
									</div>
									<!-- spring content end -->
								</div>
								<!-- year item end -->
							</div>
							<!-- timeline end -->
							<component type="typeof(Diplomeocy.Components.Map)" param-kind="@("map_no_labels")" render-mode="ServerPrerendered" />
							<div class="flex flex-col h-full w-[7.5%]">
								<div class="h-[90%]"></div>
								<div class="h-[10%]">
									<button type="button"
											class="w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-auto py-2 text-center dark:bg-gray-800 dark:hover:bg-gray-900"
											onclick="window.location.href='/Game?table=@(table.Id)'">Start
									</button>
								</div>
							</div>
						</div>
						<!-- map end -->
						<!-- content end -->
					</div>
					<!-- player footer start -->
					<div class="w-full h-[7.5%] flex flex-wrap gap-2 border-t">
						@{
							List<Diplomeocy.Database.Models.Player> players = table.Players(Model.Context).ToList();
						}
						@foreach (Diplomeocy.Database.Models.Player player in players) {
							Diplomeocy.Database.Models.User user = player.User(Model.Context);
							<div class="flex flex-1 min-w-[120px] items-center justify-center gap-x-3 p-2">
								<div class="shrink-0 group block">
									<div class="flex items-center">
										<img class="inline-block object-contain size-8 rounded-full" src="@user.PathImage" alt="Avatar">
										<div class="ms-3">
											<h3 class="font-semibold text-gray-800 dark:text-white text-sm">@user.Username</h3>
											<div class="flex justify-between">
												<p class="text-xs font-medium text-gray-400 dark:text-neutral-500">@player.Country</p>
												<p class="text-xs font-medium text-gray-400 dark:text-neutral-500">0/0</p>
											</div>
										</div>
									</div>
								</div>
							</div>
						}
						@for (int i = 0; i < 7 - table.Players(Model.Context).Count(); i++) {
							<div class="flex flex-1 min-w-[120px] items-center justify-center gap-x-3 p-2">
								<div class="shrink-0 group block">
									<div class="flex items-center">
										<img class="inline-block object-contain size-8 rounded-full" src="~/assets/images/kittators/unknown.png" alt="Avatar">
										<div class="ms-3">
											<h3 class="font-semibold text-gray-800 dark:text-white text-sm">Unknown</h3>
											<div class="flex justify-between">
												<p class="text-xs font-medium text-gray-400 dark:text-neutral-500">Italy</p>
												<p class="text-xs font-medium text-gray-400 dark:text-neutral-500">0/0</p>
											</div>
										</div>
									</div>
								</div>
							</div>
						}
					</div>
					<!-- player footer end -->
				</div>
			}
		</div>
	</div>
</div>

@section Scripts {
	<script src="~/js/tables/index.js" defer></script>
}